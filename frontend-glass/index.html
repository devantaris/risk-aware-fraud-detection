<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Risk-Aware Fraud Decision System</title>
  <meta name="description"
    content="Decision-theoretic transaction routing system using calibrated risk, bootstrap uncertainty, and novelty detection." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
</head>

<body>

  <!-- ===== HEADER ===== -->
  <header class="app-header">
    <div class="header-left">
      <div class="header-title-block">
        <h1 class="logo">Risk-Aware Fraud Decision System</h1>
        <p class="tagline">Risk × Uncertainty × Novelty - Transaction X-Ray</p>
      </div>
    </div>
    <div class="header-right">
      <div class="header-author">
        <span class="author-name">Devansh Kumar</span>
        <span class="author-role">devantaris</span>
      </div>
      <div class="header-links">
        <a href="https://github.com/devantaris" target="_blank" rel="noopener" aria-label="GitHub" class="header-social"
          title="GitHub">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z" />
          </svg>
        </a>
        <a href="https://www.linkedin.com/in/devansh-kumar-3b3701217/" target="_blank" rel="noopener"
          aria-label="LinkedIn" class="header-social" title="LinkedIn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
          </svg>
        </a>
        <a href="https://github.com/devantaris/risk-aware-fraud-detection" target="_blank" rel="noopener"
          aria-label="Repository" class="header-social" title="Project Repository">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" />
          </svg>
        </a>
      </div>
      <div class="header-status-row">
        <div class="status-indicator" id="apiStatus">
          <span class="status-dot"></span>
          <span class="status-text">Checking API…</span>
        </div>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light mode">
          <span class="theme-icon">☀</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ===== ABOUT SECTION (Tabbed) ===== -->
  <section class="info-strip" id="aboutSection">
    <div class="info-strip-inner">
      <div class="tab-header">
        <button class="tab-btn active" data-tab="technical" id="tabTechnical">System Overview (Technical)</button>
        <button class="tab-btn" data-tab="simple" id="tabSimple">What This Means (Simple)</button>
        <button class="tab-btn" data-tab="intended" id="tabIntended">Intended Use</button>
        <button class="tab-btn" data-tab="howto" id="tabHowto">How to Use</button>
        <button class="tab-btn" data-tab="output" id="tabOutput">Understanding the Output</button>
      </div>

      <!-- Tab 1: Technical -->
      <div class="tab-content active" id="contentTechnical">
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Dataset</span>
            <span class="info-value">Kaggle Credit Card Fraud — 284,807 transactions, 0.17% fraud rate</span>
          </div>
          <div class="info-item">
            <span class="info-label">Feature Space</span>
            <span class="info-value">PCA-transformed V1–V28, Amount, Time (31 dimensions)</span>
          </div>
          <div class="info-item">
            <span class="info-label">Model</span>
            <span class="info-value">Calibrated XGBoost Bootstrap Ensemble (5 members)</span>
          </div>
          <div class="info-item">
            <span class="info-label">Uncertainty</span>
            <span class="info-value">Bootstrap standard deviation across ensemble predictions</span>
          </div>
          <div class="info-item">
            <span class="info-label">Novelty</span>
            <span class="info-value">Isolation Forest trained exclusively on legitimate transactions</span>
          </div>
          <div class="info-item">
            <span class="info-label">Decision Policy</span>
            <span class="info-value">Cost-optimized routing engine with asymmetric loss functions</span>
          </div>
        </div>
        <p class="info-note">This system is designed for financial risk environments where decisions must account for
          asymmetric loss and uncertainty.</p>
      </div>

      <!-- Tab 2: Simple -->
      <div class="tab-content" id="contentSimple">
        <div class="info-prose">
          <p>This system does not only predict fraud. It decides <strong>what action to take</strong> based on three
            independent axes: how risky a transaction looks, how confident the models are, and whether the transaction
            pattern has been seen before.</p>
          <p>It balances risk, uncertainty, and cost to simulate how banking systems design transaction routing
            policies.</p>
          <div class="action-list">
            <div class="action-item"><span class="action-dot dot-approve"></span><strong>Approve</strong> — Transaction
              proceeds automatically.</div>
            <div class="action-item"><span class="action-dot dot-stepup"></span><strong>Step-Up Authentication</strong>
              — Request additional verification from the cardholder.</div>
            <div class="action-item"><span class="action-dot dot-abstain"></span><strong>Abstain</strong> — System is
              not confident. Hold for manual review.</div>
            <div class="action-item"><span class="action-dot dot-escalate"></span><strong>Escalate
                Investigation</strong> — Route to human fraud analyst for review.</div>
            <div class="action-item"><span class="action-dot dot-decline"></span><strong>Block</strong> — Decline the
              transaction automatically.</div>
          </div>
        </div>
      </div>

      <!-- Tab 3: Intended Use -->
      <div class="tab-content" id="contentIntended">
        <div class="info-prose">
          <p class="info-heading">Intended For</p>
          <ul class="info-bullets">
            <li>Banking risk teams evaluating transaction routing policies</li>
            <li>Payment processors designing fraud detection pipelines</li>
            <li>Fraud analytics teams studying decision-theoretic approaches</li>
            <li>Decision engineering research and academic study</li>
          </ul>
          <p class="info-disclaimer">This is not a consumer fraud-checking tool. It simulates institutional decision
            routing under uncertainty.</p>
        </div>
      </div>

      <!-- Tab 4: How to Use -->
      <div class="tab-content" id="contentHowto">
        <div class="info-prose">
          <ol class="info-steps">
            <li><strong>Generate a transaction scenario</strong> using the random generator or preset buttons.</li>
            <li><strong>Observe the three detection layers</strong> — risk assessment, predictive uncertainty, and
              novelty detection.</li>
            <li><strong>Review the routing decision</strong> and its triggering rule.</li>
            <li><strong>Interpret the cost impact</strong> — expected loss, review cost, and net utility.</li>
          </ol>
        </div>
      </div>

      <!-- Tab 5: Understanding the Output -->
      <div class="tab-content" id="contentOutput">
        <div class="info-grid">
          <div class="info-item">
            <span class="info-label">Risk Score</span>
            <span class="info-value">Calibrated fraud probability from the XGBoost bootstrap ensemble. Higher values
              indicate stronger fraud signals.</span>
          </div>
          <div class="info-item">
            <span class="info-label">Uncertainty</span>
            <span class="info-value">Standard deviation of predictions across 5 bootstrap models. High values indicate
              disagreement between models.</span>
          </div>
          <div class="info-item">
            <span class="info-label">Novelty Score</span>
            <span class="info-value">Deviation from legitimate transaction behavior as measured by Isolation Forest.
              Negative scores indicate novel patterns.</span>
          </div>
          <div class="info-item">
            <span class="info-label">Final Decision</span>
            <span class="info-value">Derived from Risk × Uncertainty × Cost policy. The routing engine applies
              threshold-based rules to select the optimal action.</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== MAIN LAYOUT ===== -->
  <main class="app-main">

    <!-- LEFT PANEL — Controls -->
    <aside class="panel panel-controls">
      <div class="panel-section">
        <h2 class="panel-title">Transaction Input</h2>

        <button class="btn btn-primary btn-generate" id="btnGenerate">
          <span class="btn-icon">⚡</span> Generate Random
        </button>

        <div class="divider"><span>or try a preset</span></div>

        <div class="preset-grid">
          <button class="btn btn-preset" data-preset="approve" id="presetApprove">
            <span class="preset-dot dot-approve"></span>
            Auto Approve
          </button>
          <button class="btn btn-preset" data-preset="stepup" id="presetStepup">
            <span class="preset-dot dot-stepup"></span>
            Step Up Auth
          </button>
          <button class="btn btn-preset" data-preset="abstain" id="presetAbstain">
            <span class="preset-dot dot-abstain"></span>
            Abstain
          </button>
          <button class="btn btn-preset" data-preset="escalate" id="presetEscalate">
            <span class="preset-dot dot-escalate"></span>
            Escalate Investigation
          </button>
          <button class="btn btn-preset" data-preset="decline" id="presetDecline">
            <span class="preset-dot dot-decline"></span>
            Auto Block
          </button>
        </div>
      </div>

      <!-- Transaction History -->
      <div class="panel-section">
        <h2 class="panel-title">History</h2>
        <div class="history-list" id="historyList">
          <p class="history-empty">No transactions yet</p>
        </div>
      </div>
    </aside>

    <!-- CENTER PANEL — Layered X-Ray -->
    <section class="panel panel-analysis" id="analysisPanel">

      <!-- Empty State -->
      <div class="empty-state" id="emptyState">
        <div class="empty-icon">◇</div>
        <h2>Transaction X-Ray</h2>
        <p>Generate or select a transaction to see it pass through<br />the three detection layers.</p>
        <div class="empty-layers">
          <span class="empty-layer">Ensemble Risk</span>
          <span class="empty-arrow">→</span>
          <span class="empty-layer">Uncertainty</span>
          <span class="empty-arrow">→</span>
          <span class="empty-layer">Novelty</span>
          <span class="empty-arrow">→</span>
          <span class="empty-layer">Decision</span>
        </div>
      </div>

      <!-- Loading State -->
      <div class="loading-state hidden" id="loadingState">
        <div class="loading-spinner"></div>
        <p>Analyzing transaction…</p>
      </div>

      <!-- Analysis Cards Container -->
      <div class="layers-container hidden" id="layersContainer">

        <!-- Transaction Summary Bar -->
        <div class="txn-summary glass-card" id="txnSummary">
          <div class="txn-summary-item">
            <span class="txn-label">Amount</span>
            <span class="txn-value" id="txnAmount">—</span>
          </div>
          <div class="txn-summary-item">
            <span class="txn-label">Time</span>
            <span class="txn-value" id="txnTime">—</span>
          </div>
          <div class="txn-summary-item">
            <span class="txn-label">Features</span>
            <span class="txn-value">31 dimensions</span>
          </div>
        </div>

        <!-- LAYER 1: Ensemble Risk -->
        <div class="layer-card glass-card layer-hidden" id="layer1">
          <div class="layer-header">
            <span class="layer-badge">LAYER 1</span>
            <span class="layer-name">Ensemble Risk Assessment</span>
          </div>
          <div class="layer-body">
            <div class="metric-row">
              <div class="metric-main">
                <span class="metric-label">Risk Score</span>
                <span class="metric-value mono" id="riskScore">—</span>
              </div>
              <div class="tier-badge" id="tierBadge">—</div>
            </div>
            <div class="progress-track">
              <div class="progress-fill" id="riskProgress"></div>
              <div class="progress-markers">
                <span class="marker" style="left:30%;" data-label="0.30"></span>
                <span class="marker" style="left:60%;" data-label="0.60"></span>
                <span class="marker" style="left:80%;" data-label="0.80"></span>
              </div>
            </div>
            <p class="layer-explanation" id="riskExplanation">—</p>
          </div>
        </div>

        <!-- LAYER 2: Uncertainty -->
        <div class="layer-card glass-card layer-hidden" id="layer2">
          <div class="layer-header">
            <span class="layer-badge">LAYER 2</span>
            <span class="layer-name">Predictive Uncertainty</span>
          </div>
          <div class="layer-body">
            <div class="metric-row">
              <div class="metric-main">
                <span class="metric-label">Ensemble Std Dev</span>
                <span class="metric-value mono" id="uncertaintyValue">—</span>
              </div>
              <div class="confidence-badge" id="confidenceBadge">—</div>
            </div>
            <div class="ensemble-bars" id="ensembleBars">
              <div class="ebar" id="ebar0"></div>
              <div class="ebar" id="ebar1"></div>
              <div class="ebar" id="ebar2"></div>
              <div class="ebar" id="ebar3"></div>
              <div class="ebar" id="ebar4"></div>
            </div>
            <div class="ensemble-labels">
              <span>M1</span><span>M2</span><span>M3</span><span>M4</span><span>M5</span>
            </div>
            <p class="layer-explanation" id="uncertaintyExplanation">—</p>
          </div>
        </div>

        <!-- LAYER 3: Novelty -->
        <div class="layer-card glass-card layer-hidden" id="layer3">
          <div class="layer-header">
            <span class="layer-badge">LAYER 3</span>
            <span class="layer-name">Novelty Detection</span>
          </div>
          <div class="layer-body">
            <div class="metric-row">
              <div class="metric-main">
                <span class="metric-label">Anomaly Score</span>
                <span class="metric-value mono" id="anomalyScore">—</span>
              </div>
              <div class="novelty-badge" id="noveltyBadge">—</div>
            </div>
            <div class="anomaly-ruler">
              <div class="anomaly-track">
                <div class="anomaly-zone anomaly-zone-novel"></div>
                <div class="anomaly-zone anomaly-zone-normal"></div>
                <div class="anomaly-threshold-line" style="left:46%;"></div>
                <div class="anomaly-dot" id="anomalyDot"></div>
              </div>
              <div class="anomaly-labels">
                <span>← More Anomalous</span>
                <span>Threshold (−0.08)</span>
                <span>More Normal →</span>
              </div>
            </div>
            <p class="layer-explanation" id="noveltyExplanation">—</p>
          </div>
        </div>

        <!-- Flow Arrow -->
        <div class="flow-connector layer-hidden" id="flowConnector">
          <div class="flow-line"></div>
          <div class="flow-label">routing decision</div>
          <div class="flow-line"></div>
        </div>

        <!-- VERDICT CARD -->
        <div class="verdict-card glass-card layer-hidden" id="verdictCard">
          <div class="verdict-icon" id="verdictIcon">✓</div>
          <div class="verdict-decision" id="verdictDecision">—</div>
          <p class="verdict-explanation" id="verdictExplanation">—</p>
          <div class="verdict-rule" id="verdictRule">—</div>

          <!-- Cost Breakdown -->
          <div class="cost-breakdown">
            <h3 class="cost-title">Cost Simulation</h3>
            <div class="cost-grid">
              <div class="cost-item">
                <span class="cost-label">Expected Loss</span>
                <span class="cost-value mono" id="costLoss">—</span>
              </div>
              <div class="cost-item">
                <span class="cost-label">Review Cost</span>
                <span class="cost-value mono" id="costReview">—</span>
              </div>
              <div class="cost-item cost-item-total">
                <span class="cost-label">Net Utility</span>
                <span class="cost-value mono" id="costUtility">—</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- RIGHT PANEL — Decision Landscape -->
    <aside class="panel panel-landscape">
      <h2 class="panel-title">Decision Landscape</h2>
      <p class="panel-subtitle">Risk × Uncertainty routing regions</p>
      <div class="canvas-wrapper">
        <canvas id="landscapeCanvas" width="320" height="320"></canvas>
      </div>
      <div class="landscape-legend">
        <span class="legend-item"><span class="legend-dot dot-approve"></span>Approve</span>
        <span class="legend-item"><span class="legend-dot dot-abstain"></span>Abstain</span>
        <span class="legend-item"><span class="legend-dot dot-stepup"></span>Step-Up</span>
        <span class="legend-item"><span class="legend-dot dot-escalate"></span>Escalate</span>
        <span class="legend-item"><span class="legend-dot dot-decline"></span>Decline</span>
      </div>

      <!-- Meta Info -->
      <div class="meta-section" id="metaSection">
        <h3 class="meta-title">Engine Metadata</h3>
        <div class="meta-grid" id="metaGrid">
          <span class="meta-label">Model</span>
          <span class="meta-value mono" id="metaModel">—</span>
          <span class="meta-label">Method</span>
          <span class="meta-value mono" id="metaMethod">—</span>
          <span class="meta-label">Timestamp</span>
          <span class="meta-value mono" id="metaTimestamp">—</span>
        </div>
      </div>
    </aside>

  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="app-footer">
    <div class="footer-inner">
      <span class="footer-text">Built by <strong>Devansh Kumar</strong> · devantaris</span>
      <div class="footer-links">
        <a href="https://github.com/devantaris" target="_blank" rel="noopener" aria-label="GitHub"
          class="footer-social">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z" />
          </svg>
        </a>
        <a href="https://linkedin.com/in/devansh-kumar-3b3701217" target="_blank" rel="noopener" aria-label="LinkedIn"
          class="footer-social">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
          </svg>
        </a>
      </div>
    </div>
  </footer>

  <script type="module" src="/main.js"></script>
</body>

</html>